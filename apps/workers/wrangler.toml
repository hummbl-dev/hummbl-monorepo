name = "hummbl-workers"
main = "src/index.ts"
compatibility_date = "2024-12-02"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# D1 Database binding for mental models storage
[[d1_databases]]
binding = "DB"
database_name = "hummbl-models"
database_id = "d403a9ac-d002-47ba-8331-7b1ac5ccac6d"

# KV namespace for caching
[[kv_namespaces]]
binding = "CACHE"
id = "fe24311e291f45909a02fd2a89a0735c"
preview_id = "a584d2551d4c465aaecbf869d9771d84"

# R2 bucket for static assets/exports (needs to be enabled in dashboard)
# [[r2_buckets]]
# binding = "ASSETS"
# bucket_name = "hummbl-assets"

# Environment variables (non-sensitive only)
# SECURITY: Use 'wrangler secret put' for sensitive values
[vars]
ENVIRONMENT = "production"
API_VERSION = "v1"
# JWT_SECRET = "<use: wrangler secret put JWT_SECRET>"
# PASSWORD_SALT = "<use: wrangler secret put PASSWORD_SALT>"
# GITHUB_CLIENT_ID = "<use: wrangler secret put GITHUB_CLIENT_ID>"
# GITHUB_CLIENT_SECRET = "<use: wrangler secret put GITHUB_CLIENT_SECRET>"
# GOOGLE_CLIENT_ID = "<use: wrangler secret put GOOGLE_CLIENT_ID>"
# GOOGLE_CLIENT_SECRET = "<use: wrangler secret put GOOGLE_CLIENT_SECRET>"

# Staging environment
[env.staging]
name = "hummbl-workers-staging"
vars = { ENVIRONMENT = "staging" }

[[env.staging.d1_databases]]
binding = "DB"
database_name = "hummbl-models-staging"
database_id = "TO_BE_CREATED"

[[env.staging.kv_namespaces]]
binding = "CACHE"
id = "TO_BE_CREATED"
